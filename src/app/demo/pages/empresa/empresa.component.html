<!-- Filtros -->
<form [formGroup]="filtroForm" class="row g-3 align-items-center mb-4">
  <div class="col-md-3">
    <input type="text" class="form-control" placeholder="Razón Social" formControlName="razonSocial" />
  </div>
  <div class="col-md-3">
    <input type="text" class="form-control" placeholder="RUC" formControlName="ruc" />
  </div>
  <div class="col-md-3">
    <select class="form-select" formControlName="estado">
      <option value="">Todos</option>
      <option value="ACTIVO">ACTIVADO</option>
      <option value="DESACTIVADO">DESACTIVADO</option>
    </select>
  </div>
  <div class="col-md-2 d-grid">
    <button class="btn btn-primary" (click)="buscar()">Buscar</button>
  </div>
  <div class="col-md-1 d-grid">
    <button class="btn btn-success" (click)="open(content)">+ Nueva Empresa</button>
  </div>
</form>

<!-- Tabla -->
<div class="table-responsive">
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-primary">
      <tr>
        <th (click)="ordenarPor('razonSocial')" style="cursor: pointer">Razón Social</th>
        <th (click)="ordenarPor('ruc')" style="cursor: pointer">RUC</th>
        <th (click)="ordenarPor('representanteLegal')" style="cursor: pointer">Representante Legal</th>
        <th (click)="ordenarPor('fechaRegistro')" style="cursor: pointer">Fecha de Registro</th>
        <th (click)="ordenarPor('estado')" style="cursor: pointer">Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody class="table-light">
      <tr *ngFor="let empresa of empresasFiltradas">
        <td>{{ empresa.razonSocial }}</td>
        <td>{{ empresa.ruc }}</td>
        <td>{{ empresa.representanteLegal }}</td>
        <td>{{ empresa.fechaRegistro | date: 'dd-MM-yyyy' }}</td>
        <td>{{ empresa.estado }}</td>
        <td>
          <button  (click)="open(modalPhone)" class="btn btn-warning btn-sm me-2" title="Llamar">
            <i class="bi bi-telephone"></i>
          </button>
          <button (click)="open(modalEmail)"class="btn btn-primary btn-sm me-2" title="Correo">
            <i class="bi bi-envelope"></i>
          </button>
          <button (click)="open(modalResolucion)" class="btn btn-secondary btn-sm" title="Archivo">
            <i class="bi bi-file-earmark"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>



<!-- Modal Template -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Registrar Nueva Empresa</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    <form >
      <div class="row mb-3">
        <!-- RUC (1/3 del ancho) -->
        <div class="col-md-4">
          <label for="ruc" class="form-label">RUC</label>
          <input type="text" id="ruc" class="form-control" />
        </div>

        <!-- Razón Social (2/3 del ancho) -->
        <div class="col-md-8">
          <label for="razonSocial" class="form-label">Razón Social</label>
          <input type="text" id="razonSocial" class="form-control"  />
        </div>
      </div>

      <div class="mb-3">
        <label for="representanteLegal" class="form-label">Dirección</label>
        <input type="text" id="representanteLegal" class="form-control"  />
      </div>

      <div class="row mb-3">
        <!-- Tipo de Documento (1/3 del ancho) -->
        <div class="col-md-4">
          <label for="tipoDocumento" class="form-label">Tipo de Documento</label>
          <select id="tipoDocumento" class="form-select" >
            <option value="DNI">DNI</option>
            <option value="RUC">RUC</option>
            <option value="PASAPORTE">Pasaporte</option>
            <!-- Otros tipos de documentos -->
          </select>
        </div>

        <!-- Número de Documento (2/3 del ancho) -->
        <div class="col-md-8">
          <label for="numeroDocumento" class="form-label">Número de Documento</label>
          <input type="text" id="numeroDocumento" class="form-control"  />
        </div>
      </div>

      <div class="row mb-3">
        <!-- Apellido Paterno -->
        <div class="col-md-4">
          <label for="apellidoPaterno" class="form-label">Apellido Paterno</label>
          <input type="text" id="apellidoPaterno" class="form-control" />
        </div>

        <!-- Apellido Materno -->
        <div class="col-md-4">
          <label for="apellidoMaterno" class="form-label">Apellido Materno</label>
          <input type="text" id="apellidoMaterno" class="form-control" />
        </div>

        <!-- Nombre -->
        <div class="col-md-4">
          <label for="nombre" class="form-label">Nombre</label>
          <input type="text" id="nombre" class="form-control"  />
        </div>
      </div>

      <div class="row mb-3">
        <!-- Dirección (Representante Legal) -->
        <div class="col-md-6">
          <label for="direccion" class="form-label">Dirección</label>
          <input type="text" id="direccion" class="form-control" />
        </div>

        <!-- Estado (Activo/Inactivo) -->
        <div class="col-md-6">
          <label for="estado" class="form-label">Estado</label>
          <select id="estado" class="form-select" >
            <option value="ACTIVO">Activo</option>
            <option value="DESACTIVADO">Desactivado</option>
          </select>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cerrar')">Cancelar</button>
    <button type="button" class="btn btn-primary" (click)="guardar()">Guardar</button>
  </div>
</ng-template> 


<!-- Modal para Teléfono -->
<ng-template #modalPhone let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Agreagr Telefono</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    
  </div>
</ng-template>


<!-- Modal para Correo -->
<ng-template #modalEmail let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Agregar Correo</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    
  </div>
</ng-template>



<ng-template #modalResolucion let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Resoluciones</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>

  <div class="modal-body">
    <div class="row">
      
      <div class="col-md-8">
        <h5>Lista de Resoluciones</h5>
        <!-- Tabla Responsiva -->
        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>NRU</th>
                <th>Resolución</th>
                <th>Categoría Motos</th>
                <th>Zona</th>
                <th>Estado</th>
                <th>Fecha Registro</th>
                <th>Fecha Cese</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let resolucion of resoluciones">
                <td>{{ resolucion.nru }}</td>
                <td>{{ resolucion.resolucion }}</td>
                <td>{{ resolucion.categoriaMotos }}</td>
                <td>{{ resolucion.zona }}</td>
                <td>{{ resolucion.estado }}</td>
                <td>{{ resolucion.fechaRegistro | date }}</td>
                <td>{{ resolucion.fechaCese | date }}</td>
                <td>
                  <!-- Botón de Editar con un ícono de lápiz -->
                 <button class="btn btn-primary btn-sm">
                  <i class="bi bi-bicycle"></i>
                </button>
                <!-- Botón de Zona con un ícono de mapa -->
                <button (click)="openlg(modalzona)" class="btn btn-warning btn-sm">
                  <i class="bi bi-map"></i>
                </button>
                <!-- Botón de Cambiar Estado con un ícono de moto -->
                <button (click)="open(modalestado)" class="btn btn-info btn-sm">
                  <i class="bi bi-pen-fill"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Lado Derecho: Agregar Nueva Resolución (1/3 del ancho) -->
      <div class="col-md-4">
        <h5>Agregar Nueva Resolución</h5>
        <form >
          <div class="mb-3">
            <label for="numeroResolucion" class="form-label">Número de Resolución</label>
            <input type="text" id="numeroResolucion" class="form-control" />
          </div>

          <div class="mb-3">
            <label for="cantidadMotos" class="form-label">Cantidad de Motos</label>
            <input type="number" id="cantidadMotos" class="form-control"  />
          </div>

          <div class="mb-3">
            <label for="zona" class="form-label">Zona</label>
            <input type="text" id="zona" class="form-control" />
          </div>

          <div class="row mb-3">
            <!-- Fecha de Registro -->
            <div class="col-md-6">
              <label for="fechaRegistro" class="form-label">Fecha de Registro</label>
              <input type="date" id="fechaRegistro" class="form-control"  />
            </div>

            <!-- Fecha de Cese -->
            <div class="col-md-6">
              <label for="fechaCese" class="form-label">Fecha de Cese</label>
              <input type="date" id="fechaCese" class="form-control" />
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cerrar')">Cancelar</button>
            <button type="button" class="btn btn-primary" >Guardar Registro</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</ng-template>



<!-- Modal para estado -->
<ng-template #modalestado let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Agregar estado</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    <div class="mb-3">
      <label for="representanteLegal" class="form-label">Estado</label>
        <select class="form-select" formControlName="estado">
          <option value="">Todos</option>
          <option value="ACTIVO">ACTIVADO</option>
          <option value="DESACTIVADO">DESACTIVADO</option>
        </select>
    </div>
    
  </div>
</ng-template>

<!-- Modal para zona -->
<ng-template #modalzona let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Zonas</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    <!-- Dropdown para elegir zona -->
    <div class="mb-3">
      <label for="zonaSelect" class="form-label">Elegir zona</label>
      <select class="form-select" formControlName="estado" id="zonaSelect">
        <option value="">Seleccione zona</option>
        <option value="zona01">Zona 01</option>
        <option value="zona02">Zona 02</option>
      </select>
    </div>

    <!-- Botón centrado y más ancho -->
    <div class="text-center mt-3">
      <button class="btn btn-primary btn-lg w-50">Acción</button> <!-- Button with larger width -->
    </div>
    <!-- Tabla de zonas (centrada y con espacio alrededor) -->
    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-primary">
          <tr>
            <th scope="col">Zona</th>
            <th scope="col">Estado</th>
            <th scope="col">Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of zonas">
            <td>{{ item.zona }}</td>
            <td>{{ item.estado }}</td>
            <td>
              <button class="btn btn-primary btn-sm">Editar</button>
              <button class="btn btn-danger btn-sm">Eliminar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
</ng-template>
