<!-- Filtros -->
<form [formGroup]="filtroForm" class="row g-3 align-items-center mb-4">
  <div class="col-md-3">
    <input type="text" class="form-control" placeholder="Razón Social" formControlName="razonSocial" />
  </div>
  <div class="col-md-3">
    <input type="text" class="form-control" placeholder="RUC" formControlName="ruc" />
  </div>
  <div class="col-md-3">
    <select class="form-select" formControlName="estado">
      <option value="">Todos</option>
      <option value="ACTIVO">ACTIVADO</option>
      <option value="DESACTIVADO">DESACTIVADO</option>
    </select>
  </div>
  <div class="col-md-2 d-grid">
    <button class="btn btn-primary" (click)="buscar()">Buscar</button>
  </div>
  <div class="col-md-1 d-grid">
    <button class="btn btn-success" (click)="open(content)">+ Nueva Empresa</button>
  </div>
</form>

<!-- Tabla -->
<div class="table-responsive">
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-primary">
      <tr>
        <th (click)="ordenarPor('razonSocial')" style="cursor: pointer">Razón Social</th>
        <th (click)="ordenarPor('ruc')" style="cursor: pointer">RUC</th>
        <th (click)="ordenarPor('representanteLegal')" style="cursor: pointer">Representante Legal</th>
        <th (click)="ordenarPor('fechaRegistro')" style="cursor: pointer">Fecha de Registro</th>
        <th (click)="ordenarPor('estado')" style="cursor: pointer">Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody class="table-light">
      <tr *ngFor="let empresa of empresasFiltradas">
        <td>{{ empresa.razonSocial }}</td>
        <td>{{ empresa.ruc }}</td>
        <td>{{ empresa.representanteLegal }}</td>
        <td>{{ empresa.fechaRegistro | date: 'dd-MM-yyyy' }}</td>
        <td>{{ empresa.estado }}</td>
        <td>
          <button class="btn btn-warning btn-sm me-2" title="Llamar">
            <i class="bi bi-telephone"></i>
          </button>
          <button class="btn btn-primary btn-sm me-2" title="Correo">
            <i class="bi bi-envelope"></i>
          </button>
          <button class="btn btn-secondary btn-sm" title="Archivo">
            <i class="bi bi-file-earmark"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<!-- Modal Template -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">Registrar Nueva Empresa</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cerrar')"></button>
  </div>
  <div class="modal-body">
    <form [formGroup]="empresaForm">
      <div class="row mb-3">
        <!-- RUC (1/3 del ancho) -->
        <div class="col-md-4">
          <label for="ruc" class="form-label">RUC</label>
          <input type="text" id="ruc" class="form-control" formControlName="ruc" />
        </div>

        <!-- Razón Social (2/3 del ancho) -->
        <div class="col-md-8">
          <label for="razonSocial" class="form-label">Razón Social</label>
          <input type="text" id="razonSocial" class="form-control" formControlName="razonSocial" />
        </div>
      </div>

      <div class="mb-3">
        <label for="representanteLegal" class="form-label">Dirección</label>
        <input type="text" id="representanteLegal" class="form-control" formControlName="representanteLegal" />
      </div>

      <div class="row mb-3">
        <!-- Tipo de Documento (1/3 del ancho) -->
        <div class="col-md-4">
          <label for="tipoDocumento" class="form-label">Tipo de Documento</label>
          <select id="tipoDocumento" class="form-select" formControlName="tipoDocumento">
            <option value="DNI">DNI</option>
            <option value="RUC">RUC</option>
            <option value="PASAPORTE">Pasaporte</option>
            <!-- Otros tipos de documentos -->
          </select>
        </div>

        <!-- Número de Documento (2/3 del ancho) -->
        <div class="col-md-8">
          <label for="numeroDocumento" class="form-label">Número de Documento</label>
          <input type="text" id="numeroDocumento" class="form-control" formControlName="numeroDocumento" />
        </div>
      </div>

      <div class="row mb-3">
        <!-- Apellido Paterno -->
        <div class="col-md-4">
          <label for="apellidoPaterno" class="form-label">Apellido Paterno</label>
          <input type="text" id="apellidoPaterno" class="form-control" formControlName="apellidoPaterno" />
        </div>

        <!-- Apellido Materno -->
        <div class="col-md-4">
          <label for="apellidoMaterno" class="form-label">Apellido Materno</label>
          <input type="text" id="apellidoMaterno" class="form-control" formControlName="apellidoMaterno" />
        </div>

        <!-- Nombre -->
        <div class="col-md-4">
          <label for="nombre" class="form-label">Nombre</label>
          <input type="text" id="nombre" class="form-control" formControlName="nombre" />
        </div>
      </div>

      <div class="row mb-3">
        <!-- Dirección (Representante Legal) -->
        <div class="col-md-6">
          <label for="direccion" class="form-label">Dirección</label>
          <input type="text" id="direccion" class="form-control" formControlName="direccion" />
        </div>

        <!-- Estado (Activo/Inactivo) -->
        <div class="col-md-6">
          <label for="estado" class="form-label">Estado</label>
          <select id="estado" class="form-select" formControlName="estado">
            <option value="ACTIVO">Activo</option>
            <option value="DESACTIVADO">Desactivado</option>
          </select>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Cerrar')">Cancelar</button>
    <button type="button" class="btn btn-primary" (click)="guardar()">Guardar</button>
  </div>
</ng-template> 


